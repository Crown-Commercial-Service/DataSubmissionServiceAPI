Framework <%= framework_short_name %> {
  Name '<%= framework_name %>'

  <%- if management_charge.is_a?(Framework::ManagementChargeCalculator::FlatRate) -%>
  ManagementCharge <%= management_charge.percentage %>%
  <%- elsif management_charge.is_a?(Framework::ManagementChargeCalculator::ColumnBased) -%>
  ManagementCharge varies_by '<%= management_charge.varies_by %>' {
    <%- management_charge.value_to_percentage.each_pair do |value, percentage| -%>
    <%= "%-30s -> %s%%" % ["'#{value}'", percentage] %>
    <%- end -%>
  }
  <%- end -%>

  InvoiceFields {
    <%- invoice_fields.each do |field| -%>
    <%= field.to_fdl %>
    <%- end -%>
  }
  <%- if contract_fields.any? -%>

  ContractFields {
    <%- contract_fields.each do |field| -%>
    <%= field.to_fdl %>
    <%- end -%>
  }
  <%- end -%>
  <%- if lookups.any? -%>

  Lookups {
    <%- lookups.each do |lookup| -%>
    <%= lookup.fdl_name -%> [
      <%- lookup.values.each do |value| -%>
      '<%= value -%>'
      <%- end -%>
    ]

    <%- end -%>
  }
  <%- end -%>
}
