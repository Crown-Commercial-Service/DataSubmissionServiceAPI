class Framework
  module Definition
    ##
    # Generated by rails g framework:definition:debug
    #
    # Note that this class would ordinarily be anonymous
    class <%= sanitised_framework_short_name %> < Base
      framework_short_name '<%= framework_short_name %>'
      framework_name       '<%= framework_name %>'

      class Invoice < EntryData
        total_value_field '<%= invoice_total_value_field.attr.name %>'

        <%- if lookups.any? -%>
        lookups (
<%= lookups.pretty_inspect.indent(10) -%>
        )
        <%- end %>
        <%- invoice_fields.each do |field| -%>
        <%= [
              "field #{quote(field.attr.name)}",
              ':string',
              modernize_hash(field.validator_hash),
            ].flatten.compact.join(', ') %>
        <%- end -%>
      end
      <%- if order_fields.any? -%>

      class Order < EntryData
        total_value_field '<%= order_total_value_field.attr.name %>'

        <%- if lookups.any? -%>
        lookups (
<%= lookups.pretty_inspect.indent(10) -%>
        )
        <%- end %>
        <%- order_fields.each do |field| -%>
        <%= [
              "field #{quote(field.attr.name)}",
              ':string',
              modernize_hash(field.validator_hash),
            ].flatten.compact.join(', ') %>
        <%- end -%>
      end
      <%- end -%>
    end
  end
end
